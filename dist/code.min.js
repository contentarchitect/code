!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("@contentarchitect/editor")):"function"==typeof define&&define.amd?define(["@contentarchitect/editor"],n):(e="undefined"!=typeof globalThis?globalThis:e||self).Code=n(e.ContentArchitect)}(this,(function(e){"use strict";var n={props:["value"],data:()=>({highlighted:""}),methods:{highlight(){let e;var n;"undefined"!=typeof Prism&&Prism.languages[this.value.language]?e=Prism.highlight(this.value.code+"\n",Prism.languages[this.value.language]||"",this.value.language||""):(n=this.value.code+"\n",e=String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")),this.highlighted=e;let t=`<pre class="language-${this.value.language}"><code class="language-${this.value.language}">${e}</code></pre>`;this.value.highlighted=t}},watch:{"value.code":{immediate:!0,handler:"highlight"},"value.language":"highlight"}};function t(e,n,t,a,s,i,o,l,r,d){"boolean"!=typeof o&&(r=l,l=o,o=!1);const c="function"==typeof t?t.options:t;let u;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),a&&(c._scopeId=a),i?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,r(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=u):n&&(u=o?function(e){n.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){n.call(this,l(e))}),u)if(c.functional){const e=c.render;c.render=function(n,t){return u.call(t),e(n,t)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,u):[u]}return t}const a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function s(e){return(e,n)=>function(e,n){const t=a?n.media||"default":e,s=o[t]||(o[t]={ids:new Set,styles:[]});if(!s.ids.has(e)){s.ids.add(e);let t=n.source;if(n.map&&(t+="\n/*# sourceURL="+n.map.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),s.element||(s.element=document.createElement("style"),s.element.type="text/css",n.media&&s.element.setAttribute("media",n.media),void 0===i&&(i=document.head||document.getElementsByTagName("head")[0]),i.appendChild(s.element)),"styleSheet"in s.element)s.styles.push(t),s.element.styleSheet.cssText=s.styles.filter(Boolean).join("\n");else{const e=s.ids.size-1,n=document.createTextNode(t),a=s.element.childNodes;a[e]&&s.element.removeChild(a[e]),a.length?s.element.insertBefore(n,a[e]):s.element.appendChild(n)}}}(e,n)}let i;const o={};const l=n;var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("pre",{ref:"pre",staticClass:"code-pre",class:["language-"+e.value.language]},[t("code",{ref:"code",staticClass:"code",class:["language-"+e.value.language]},[t("div",{staticClass:"textarea-container"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value.code,expression:"value.code"}],ref:"textarea",attrs:{spellcheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false"},domProps:{value:e.value.code},on:{input:function(n){n.target.composing||e.$set(e.value,"code",n.target.value)}}})]),t("span",{domProps:{innerHTML:e._s(e.highlighted)}})])])};r._withStripped=!0;const d=t({render:r,staticRenderFns:[]},(function(e){e&&e("data-v-22bf1c3d_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"view.vue"},media:void 0})}),l,"data-v-22bf1c3d",false,undefined,!1,s,void 0,void 0);const c={components:{CssGrid:e.CssGrid,VSelect:e.VSelect},props:["value"],data:()=>({languages:Object.keys(Prism.languages).filter(e=>"function"!=typeof Prism.languages[e])})};var u=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("css-grid",{attrs:{columns:["1fr","1fr"],gap:"8px 0"}},[t("label",{attrs:{for:""}},[e._v("Mode")]),e._v(" "),t("v-select",{model:{value:e.value.language,callback:function(n){e.$set(e.value,"language",n)},expression:"value.language"}},[e.languages.length?t("option",{domProps:{value:""}}):e._e(),e._v(" "),e._l(e.languages,(function(n){return t("option",{key:n,domProps:{value:n}},[e._v(e._s(n))])}))],2)],1)};u._withStripped=!0;const g=t({render:u,staticRenderFns:[]},(function(e){e&&e("data-v-17a17b4e_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"settings.vue"},media:void 0})}),c,undefined,false,undefined,!1,s,void 0,void 0);var h={render:function(){var e=this.$createElement,n=this._self._c||e;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"}},[n("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),n("path",{attrs:{d:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}})])}};class Code extends e.Block{static get viewComponent(){return d}static get settingsComponent(){return g}static get icon(){return h}static defaultSettings={};static defaultData(){return{language:"",code:"",highlighted:""}}toHTML(){return this.highlighted}static serializeFromHTML(e){return{language:e.dataset.language,code:Array.from(e.querySelectorAll("pre")).map(e=>e.innerText).join("\n"),highlighted:""}}get dataset(){return{language:this.language}}}return Code}));
